# Core runtime
ARB_LIVE_MODE=false
ARB_RUN_ONCE=false
ARB_STREAM_MODE=false
ARB_STREAM_RECOMPUTE_COOLDOWN_MS=400
ARB_POLL_INTERVAL_SECONDS=60
ARB_LOG_LEVEL=INFO
ARB_PAPER_STRICT_SIMULATION=true
ARB_PAPER_POSITION_LIFETIME_SECONDS=900
ARB_PAPER_DYNAMIC_LIFETIME_ENABLED=false
ARB_PAPER_DYNAMIC_LIFETIME_RESOLUTION_FRACTION=0.02
ARB_PAPER_DYNAMIC_LIFETIME_MIN_SECONDS=60
ARB_PAPER_DYNAMIC_LIFETIME_MAX_SECONDS=900

# Bankroll / risk
ARB_DEFAULT_BANKROLL_USD=250
ARB_BANKROLL_BY_VENUE=kalshi=250,polymarket=100
ARB_MIN_NET_EDGE_PER_CONTRACT=0.01
ARB_MIN_EXPECTED_PROFIT_USD=1.0
ARB_ENABLE_CROSS_VENUE=true
ARB_CROSS_VENUE_MIN_MATCH_SCORE=0.62
ARB_CROSS_VENUE_MAPPING_PATH=arb_bot/config/cross_venue_map.example.csv
ARB_CROSS_VENUE_MAPPING_REQUIRED=false
ARB_ENABLE_FUZZY_CROSS_VENUE_FALLBACK=true
ARB_ENABLE_MAKER_ESTIMATES=true
ARB_ENABLE_STRUCTURAL_ARB=true
ARB_STRUCTURAL_RULES_PATH=arb_bot/config/structural_rules.example.json

# Discovery / near-arb mode
ARB_DISCOVERY_MODE=false
ARB_DISCOVERY_MIN_NET_EDGE_PER_CONTRACT=-0.01
ARB_DISCOVERY_MIN_EXPECTED_PROFIT_USD=0.0
ARB_NEAR_ARB_TOTAL_COST_THRESHOLD=1.01

# Per-kind detection lanes (blank = inherit global thresholds)
ARB_LANE_INTRA_ENABLED=true
ARB_LANE_INTRA_MIN_NET_EDGE_PER_CONTRACT=
ARB_LANE_INTRA_MIN_EXPECTED_PROFIT_USD=
ARB_LANE_INTRA_MIN_FILL_PROBABILITY=
ARB_LANE_INTRA_MIN_REALIZED_PROFIT_USD=

ARB_LANE_CROSS_ENABLED=true
ARB_LANE_CROSS_MIN_NET_EDGE_PER_CONTRACT=
ARB_LANE_CROSS_MIN_EXPECTED_PROFIT_USD=
ARB_LANE_CROSS_MIN_FILL_PROBABILITY=
ARB_LANE_CROSS_MIN_REALIZED_PROFIT_USD=

ARB_LANE_STRUCTURAL_BUCKET_ENABLED=true
ARB_LANE_STRUCTURAL_BUCKET_MIN_NET_EDGE_PER_CONTRACT=
ARB_LANE_STRUCTURAL_BUCKET_MIN_EXPECTED_PROFIT_USD=
ARB_LANE_STRUCTURAL_BUCKET_MIN_FILL_PROBABILITY=
ARB_LANE_STRUCTURAL_BUCKET_MIN_REALIZED_PROFIT_USD=

ARB_LANE_STRUCTURAL_EVENT_TREE_ENABLED=true
ARB_LANE_STRUCTURAL_EVENT_TREE_MIN_NET_EDGE_PER_CONTRACT=
ARB_LANE_STRUCTURAL_EVENT_TREE_MIN_EXPECTED_PROFIT_USD=
ARB_LANE_STRUCTURAL_EVENT_TREE_MIN_FILL_PROBABILITY=
ARB_LANE_STRUCTURAL_EVENT_TREE_MIN_REALIZED_PROFIT_USD=

ARB_LANE_STRUCTURAL_PARITY_ENABLED=true
ARB_LANE_STRUCTURAL_PARITY_MIN_NET_EDGE_PER_CONTRACT=
ARB_LANE_STRUCTURAL_PARITY_MIN_EXPECTED_PROFIT_USD=
ARB_LANE_STRUCTURAL_PARITY_MIN_FILL_PROBABILITY=
ARB_LANE_STRUCTURAL_PARITY_MIN_REALIZED_PROFIT_USD=

# Universe ranking / hotset scan
ARB_UNIVERSE_RANKING_ENABLED=true
ARB_UNIVERSE_HOTSET_SIZE=0
ARB_UNIVERSE_ENABLE_COLD_SCAN_FALLBACK=true
ARB_UNIVERSE_SCORE_VOLUME_WEIGHT=1.0
ARB_UNIVERSE_SCORE_LIQUIDITY_WEIGHT=1.0
ARB_UNIVERSE_SCORE_SPREAD_WEIGHT=1.0
ARB_UNIVERSE_SCORE_STALENESS_WEIGHT=0.05

# Fill model
ARB_FILL_MODEL_ENABLED=true
ARB_FILL_MIN_PROBABILITY=0.50
ARB_FILL_QUEUE_DEPTH_FACTOR=1.5
ARB_FILL_STALE_HALF_LIFE_SECONDS=20
ARB_FILL_SPREAD_PENALTY_WEIGHT=1.5
ARB_FILL_TRANSFORM_SOURCE_PENALTY=0.05
ARB_FILL_PARTIAL_PENALTY_PER_CONTRACT=0.0003
ARB_FILL_MIN_QUALITY_SCORE=-0.5
ARB_FILL_MIN_REALIZED_PROFIT_USD=0.0

ARB_MAX_DOLLARS_PER_TRADE=40
ARB_MAX_CONTRACTS_PER_TRADE=100
ARB_MAX_BANKROLL_FRACTION_PER_TRADE=0.08
ARB_MAX_LIQUIDITY_FRACTION_PER_TRADE=0.5
ARB_ENABLE_EXECUTION_AWARE_KELLY=true
ARB_KELLY_FRACTION_CAP=1.0
ARB_KELLY_FAILURE_LOSS_FLOOR_FRACTION=0.0005
ARB_ENABLE_KELLY_CONFIDENCE_SHRINKAGE=true
ARB_KELLY_CONFIDENCE_WINDOW=200
ARB_KELLY_CONFIDENCE_SENSITIVITY=1.0
ARB_KELLY_CONFIDENCE_FLOOR=0.25
ARB_CLUSTER_BUDGET_FRACTION=0.35
ARB_MAX_OPEN_POSITIONS_PER_CLUSTER=3
ARB_CLUSTER_EXPOSURE_PENALTY_LAMBDA=0.75
ARB_MAX_EXPOSURE_PER_VENUE_USD=200
ARB_MAX_OPEN_MARKETS_PER_VENUE=10
# Keep a small slot reserve so intra-venue opens do not starve cross/parity/bucket lanes.
ARB_NON_INTRA_OPEN_MARKET_RESERVE_PER_VENUE=2
ARB_MARKET_COOLDOWN_SECONDS=900
# Options: market, market_side
ARB_MARKET_COOLDOWN_SCOPE=market

# Constraint-aware correlated-event pricing
ARB_ENABLE_CONSTRAINT_PRICING=true
ARB_CONSTRAINT_MAX_BRUTEFORCE_MARKETS=14
ARB_CROSS_VENUE_EQUIVALENCE_MIN_MATCH_SCORE=0.9

# Time-to-resolution regime switching
ARB_TIME_REGIME_ENABLED=true
ARB_TIME_REGIME_FAR_DAYS=30
ARB_TIME_REGIME_NEAR_DAYS=7
ARB_TIME_REGIME_FAR_EDGE_MULTIPLIER=0.9
ARB_TIME_REGIME_FAR_EXPECTED_PROFIT_MULTIPLIER=0.9
ARB_TIME_REGIME_FAR_FILL_PROBABILITY_DELTA=-0.03
ARB_TIME_REGIME_FAR_REALIZED_PROFIT_MULTIPLIER=0.9
ARB_TIME_REGIME_NEAR_EDGE_MULTIPLIER=1.15
ARB_TIME_REGIME_NEAR_EXPECTED_PROFIT_MULTIPLIER=1.1
ARB_TIME_REGIME_NEAR_FILL_PROBABILITY_DELTA=0.03
ARB_TIME_REGIME_NEAR_REALIZED_PROFIT_MULTIPLIER=1.1

# Structural bucket quality model (signal-maximizing exploit/explore)
ARB_BUCKET_QUALITY_ENABLED=true
ARB_BUCKET_QUALITY_HISTORY_GLOB=arb_bot/output/paper_*.csv
ARB_BUCKET_QUALITY_HISTORY_MAX_FILES=50
ARB_BUCKET_QUALITY_MIN_OBSERVATIONS=8
ARB_BUCKET_QUALITY_MAX_ACTIVE_BUCKETS=0
ARB_BUCKET_QUALITY_EXPLORE_FRACTION=0.15
ARB_BUCKET_QUALITY_PRIOR_MEAN_REALIZED_PROFIT=0.002
ARB_BUCKET_QUALITY_PRIOR_STRENGTH=12
ARB_BUCKET_QUALITY_MIN_SCORE=-0.02
ARB_BUCKET_QUALITY_LEG_COUNT_PENALTY=0.00025
ARB_BUCKET_QUALITY_LIVE_UPDATE_INTERVAL=25

# Kalshi
KALSHI_ENABLED=true
KALSHI_API_BASE_URL=https://api.elections.kalshi.com/trade-api/v2
KALSHI_WS_URL=wss://api.elections.kalshi.com/trade-api/ws/v2
KALSHI_ENABLE_STREAM=true
KALSHI_STREAM_RECONNECT_DELAY_SECONDS=2.0
KALSHI_STREAM_PING_INTERVAL_SECONDS=20.0
KALSHI_MARKET_TICKERS=
KALSHI_MARKET_LIMIT=40
KALSHI_USE_ORDERBOOK_QUOTES=true
KALSHI_MAX_ORDERBOOK_CONCURRENCY=10
KALSHI_MARKET_SCAN_PAGES=1
KALSHI_MARKET_PAGE_SIZE=100
KALSHI_REQUEST_PAUSE_SECONDS=0.10
KALSHI_MIN_LIQUIDITY=1.0
# Example: KXMVESPORTSMULTIGAMEEXTENDED
KALSHI_EXCLUDE_TICKER_PREFIXES=
KALSHI_INCLUDE_EVENT_TICKERS=
KALSHI_REQUIRE_NONDEGENERATE_QUOTES=true
KALSHI_MAKER_TICK_SIZE=0.01
KALSHI_MAKER_AGGRESSIVENESS_TICKS=2
KALSHI_TAKER_FEE_PER_CONTRACT=0.00
KALSHI_KEY_ID=
KALSHI_PRIVATE_KEY_PATH=
KALSHI_PRIVATE_KEY_PEM=

# Polymarket
POLYMARKET_ENABLED=true
POLYMARKET_GAMMA_BASE_URL=https://gamma-api.polymarket.com
POLYMARKET_CLOB_BASE_URL=https://clob.polymarket.com
POLYMARKET_WS_BASE_URL=wss://ws-subscriptions-clob.polymarket.com/ws
POLYMARKET_MARKET_LIMIT=25
POLYMARKET_MARKET_SCAN_PAGES=1
POLYMARKET_MARKET_PAGE_SIZE=100
POLYMARKET_MIN_LIQUIDITY=1.0
POLYMARKET_MIN_PAIRS_BEFORE_EVENT_FALLBACK=10
POLYMARKET_QUOTE_DEPTH_CONTRACTS=20
POLYMARKET_MAX_PAIR_STALENESS_SECONDS=2
POLYMARKET_REQUIRE_STRICT_YES_NO_LABELS=true
POLYMARKET_MAKER_TICK_SIZE=0.001
POLYMARKET_MAKER_AGGRESSIVENESS_TICKS=2
POLYMARKET_ENABLE_STREAM=true
POLYMARKET_WS_CUSTOM_FEATURE_ENABLED=false
POLYMARKET_MARKET_IDS=
POLYMARKET_TAKER_FEE_PER_CONTRACT=0.00

# Needed for live order posting through py-clob-client
POLYMARKET_CHAIN_ID=137
POLYMARKET_PRIVATE_KEY=
POLYMARKET_FUNDER=
POLYMARKET_API_KEY=
POLYMARKET_API_SECRET=
POLYMARKET_API_PASSPHRASE=
