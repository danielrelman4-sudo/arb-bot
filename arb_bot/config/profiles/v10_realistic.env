# v10 profile: realistic execution profile with execution viability fixes.
# Based on v9 with fixes from Monte Carlo paper run analysis showing
# -$2.22 on $1,000 bankroll in 60-min realistic session.
#
# Key changes:
# 1. Disable intra-venue lane (0.2c edge can't survive any friction)
# 2. Raise edge thresholds above execution cost floor
# 3. Limit structural buckets to 4 legs max
# 4. Use spread-based legging loss model (1c/contract to unwind)
# 5. Reduce slippage std to 0.3c (empirical from paper runs)

# Use strict mapping + parity-enriched structural rules
ARB_STRUCTURAL_RULES_PATH=arb_bot/config/structural_rules.generated.v3_merged.json
ARB_CROSS_VENUE_MAPPING_PATH=arb_bot/config/cross_venue_map.strict.csv
ARB_CROSS_VENUE_MAPPING_REQUIRED=true

# Stream cadence / refresh
ARB_STREAM_RECOMPUTE_COOLDOWN_MS=2000
ARB_POLL_INTERVAL_SECONDS=20
ARB_UNIVERSE_HOTSET_SIZE=0
ARB_FILL_STALE_HALF_LIFE_SECONDS=300

# Expanded universe (same as v9)
KALSHI_MARKET_LIMIT=250
KALSHI_MARKET_SCAN_PAGES=8
KALSHI_MARKET_PAGE_SIZE=100
KALSHI_USE_ORDERBOOK_QUOTES=false
KALSHI_MAX_ORDERBOOK_CONCURRENCY=1
KALSHI_REQUEST_PAUSE_SECONDS=0.35
KALSHI_MIN_LIQUIDITY=0.0
KALSHI_STREAM_SUBSCRIPTION_BATCH_SIZE=120
KALSHI_STREAM_SUBSCRIPTION_RETRY_ATTEMPTS=4
KALSHI_STREAM_SUBSCRIPTION_ACK_TIMEOUT_SECONDS=3
KALSHI_STREAM_MAX_TICKERS_PER_SOCKET=220
KALSHI_STREAM_PRIORITY_REFRESH_LIMIT=40
KALSHI_STREAM_ALLOW_REST_TOPUP=false
KALSHI_STREAM_BOOTSTRAP_SCAN_PAGES=3
KALSHI_STREAM_BOOTSTRAP_ENRICH_LIMIT=0
KALSHI_EVENTS_429_CIRCUIT_THRESHOLD=4
KALSHI_EVENTS_429_CIRCUIT_COOLDOWN_SECONDS=180
POLYMARKET_MARKET_LIMIT=1200
POLYMARKET_MARKET_SCAN_PAGES=30
POLYMARKET_MARKET_PAGE_SIZE=150
POLYMARKET_MIN_LIQUIDITY=0.0
POLYMARKET_MAX_ORDERBOOK_CONCURRENCY=4
POLYMARKET_BOOK_RETRY_ATTEMPTS=4
POLYMARKET_BOOK_RETRY_BASE_DELAY_SECONDS=0.25
POLYMARKET_BOOK_RETRY_MAX_DELAY_SECONDS=2.5

# --- INTRA-VENUE: DISABLED ---
# 0.2c edge on Polymarket YES+NO pairs can't survive any friction.
# Paper run: 34 intra trades = -$1.60 net.
ARB_LANE_INTRA_ENABLED=false

# --- CROSS-VENUE: raised edge minimum ---
# Paper run: 11 cross trades = +$0.02, barely positive.
# Need 0.5c edge to cover legging risk + slippage.
ARB_LANE_CROSS_ENABLED=true
ARB_LANE_CROSS_MIN_NET_EDGE_PER_CONTRACT=0.005
ARB_LANE_CROSS_MIN_REALIZED_PROFIT_USD=0.005

# --- STRUCTURAL BUCKET: raised edge, max legs ---
# Paper run: 5 bucket trades = -$0.57, but 4-12c edge available.
# Multi-leg fill death spiral on 5+ legs. Cap at 4 legs max.
ARB_LANE_STRUCTURAL_BUCKET_ENABLED=true
ARB_LANE_STRUCTURAL_BUCKET_MIN_NET_EDGE_PER_CONTRACT=0.02
ARB_LANE_STRUCTURAL_BUCKET_MIN_EXPECTED_PROFIT_USD=0.0020
ARB_LANE_STRUCTURAL_BUCKET_MIN_FILL_PROBABILITY=0.70
ARB_LANE_STRUCTURAL_BUCKET_MIN_REALIZED_PROFIT_USD=0.005
ARB_MAX_BUCKET_LEGS=4

# Event-tree lane
ARB_LANE_STRUCTURAL_EVENT_TREE_ENABLED=true

# --- STRUCTURAL PARITY: raised edge ---
# Paper run: 11 parity trades = -$0.08, marginal.
ARB_LANE_STRUCTURAL_PARITY_ENABLED=true
ARB_LANE_STRUCTURAL_PARITY_MIN_NET_EDGE_PER_CONTRACT=0.005
ARB_LANE_STRUCTURAL_PARITY_MIN_EXPECTED_PROFIT_USD=0.0015
ARB_LANE_STRUCTURAL_PARITY_MIN_FILL_PROBABILITY=0.72
ARB_LANE_STRUCTURAL_PARITY_MIN_REALIZED_PROFIT_USD=0.003

# Side-aware cooldown
ARB_MARKET_COOLDOWN_SCOPE=market_side

# Bucket quality model
ARB_BUCKET_QUALITY_ENABLED=true
ARB_BUCKET_QUALITY_HISTORY_GLOB=arb_bot/output/paper_*.csv
ARB_BUCKET_QUALITY_HISTORY_MAX_FILES=80
ARB_BUCKET_QUALITY_MIN_OBSERVATIONS=6
ARB_BUCKET_QUALITY_MAX_ACTIVE_BUCKETS=0
ARB_BUCKET_QUALITY_EXPLORE_FRACTION=0.20
ARB_BUCKET_QUALITY_PRIOR_MEAN_REALIZED_PROFIT=0.002
ARB_BUCKET_QUALITY_PRIOR_STRENGTH=12
ARB_BUCKET_QUALITY_MIN_SCORE=-0.01
ARB_BUCKET_QUALITY_LEG_COUNT_PENALTY=0.00030
ARB_BUCKET_QUALITY_LIVE_UPDATE_INTERVAL=20

# Capacity limits
ARB_MAX_OPEN_MARKETS_PER_VENUE=60
ARB_MAX_OPEN_POSITIONS_PER_CLUSTER=12

# --- MONTE CARLO: realistic parameters ---
ARB_PAPER_MONTE_CARLO_ENABLED=true
# Spread-based legging loss: 1c per contract to unwind a filled leg
ARB_PAPER_MONTE_CARLO_LEGGING_UNWIND_SPREAD_CENTS=1.0
# Reduced slippage (empirical from paper runs)
ARB_PAPER_MONTE_CARLO_SLIPPAGE_STD_CENTS=0.3
# Realistic latency
ARB_PAPER_MONTE_CARLO_EXPECTED_LATENCY_SECONDS=1.0
